{"ast":null,"code":"import { getDetteMontant } from \"../../metier/getDetteMontant\";\nimport { BuyPretDialogComponent } from \"../../dialogbox/buy-pret-dialog/buy-pret-dialog.component\";\nimport { forkJoin, tap } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/epargne.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/table\";\nimport * as i7 from \"@angular/material/grid-list\";\nfunction BuyPretComponent_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" No. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r19 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i_r19 + 1, \" \");\n  }\n}\nfunction BuyPretComponent_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" Nom \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r20.epargnant.membre.nom, \" \");\n  }\n}\nfunction BuyPretComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" Montant \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19)(1, \"span\", 20);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const element_r21 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(element_r21.montant);\n  }\n}\nfunction BuyPretComponent_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" Montant + interet \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19)(1, \"span\", 20);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r24 = ctx.index;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.getPretvalue(i_r24));\n  }\n}\nfunction BuyPretComponent_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" Date pret \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r25.datePret, \" \");\n  }\n}\nfunction BuyPretComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" Reste a Verser \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r27 = ctx.index;\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.restes[i_r27], \" \");\n  }\n}\nfunction BuyPretComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \" Deja verser \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r29 = ctx.index;\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r13.dejaVerse[i_r29]);\n  }\n}\nfunction BuyPretComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"Payer\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_27_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function BuyPretComponent_td_27_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      const element_r30 = ctx_r35.$implicit;\n      const i_r31 = ctx_r35.index;\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.openDialogBox(300, 100, element_r30, i_r31));\n    });\n    i0.ɵɵtext(1, \" Payer \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BuyPretComponent_td_27_h4_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r31 = i0.ɵɵnextContext().index;\n    const ctx_r33 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Paye le :\", i0.ɵɵpipeBind2(2, 1, ctx_r33.lastVersementDate(i_r31), \"yyyy-MM-dd\"), \"\");\n  }\n}\nfunction BuyPretComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtemplate(1, BuyPretComponent_td_27_button_1_Template, 2, 0, \"button\", 21);\n    i0.ɵɵtemplate(2, BuyPretComponent_td_27_h4_2_Template, 3, 4, \"h4\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r31 = ctx.index;\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r15.isDone(i_r31));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r15.isDone(i_r31));\n  }\n}\nfunction BuyPretComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 25);\n  }\n}\nfunction BuyPretComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\nclass BuyPretComponent {\n  constructor(epargneService, activatedRoute, dialogBox, cdr) {\n    this.epargneService = epargneService;\n    this.activatedRoute = activatedRoute;\n    this.dialogBox = dialogBox;\n    this.cdr = cdr;\n    this.displayedColumns = ['position', 'name', 'montant', 'pret', 'datePret', 'rembourse', 'verser', 'action'];\n    this.dataSource = [];\n    this.dataVerse = new Map();\n    this.dejaVerse = [];\n    this.restes = [];\n  }\n  ngOnInit() {\n    let snapshot = this.activatedRoute.snapshot;\n    let tempVerse = [];\n    this.epargne = JSON.parse(snapshot.params[\"ep\"]);\n    let pretCall = this.epargneService.getDetteByEpargnes(Number(this.epargne.id));\n    let verseCall = this.epargneService.getAllVerseByEpargnes(Number(this.epargne.id));\n    forkJoin([pretCall, verseCall]).pipe(tap(data => {\n      this.dataSource = data[0];\n      console.log(\"########## is done ##########\", data[0], data[1]);\n      for (let verse of data[1]) {\n        if (verse.pret?.id) {\n          if (this.dataVerse.has(verse.pret?.id)) {\n            tempVerse = this.dataVerse.get(verse.pret.id);\n            tempVerse.push(verse);\n            this.dataVerse.set(verse.pret.id, tempVerse);\n          } else {\n            tempVerse = [];\n            tempVerse.push(verse);\n            this.dataVerse.set(verse.pret.id, tempVerse);\n          }\n        }\n      }\n      console.log(\"dataverse : \", this.dataVerse);\n      let i = 0;\n      for (let pret of this.dataSource) {\n        if (!this.dataVerse.has(Number(pret.id))) {\n          this.dejaVerse.push(0);\n          this.restes.push(this.getPretvalue(i));\n        } else {\n          let somme = 0;\n          // if(this.dataVerse.get(Number(pret.id)))\n          for (let verse of this.dataVerse.get(Number(pret.id))) {\n            somme += Number(verse.montant);\n          }\n          this.dejaVerse.push(somme);\n          this.restes.push(this.getPretvalue(i) - somme);\n        }\n        i++;\n      }\n    })).subscribe(() => {\n      this.cdr.markForCheck();\n    });\n  }\n  checkBuy(element) {\n    return false;\n  }\n  getPretvalue(index) {\n    let versements = this.dataVerse.get(Number(this.dataSource[index].id)) ? this.dataVerse.get(Number(this.dataSource[index].id)) : [];\n    return getDetteMontant(this.dataSource[index], versements);\n  }\n  isDone(index) {\n    return this.restes[index] <= 0 ? false : true;\n  }\n  lastVersementDate(index) {\n    let lastVersementDate;\n    for (let verse of this.dataVerse.get(index)) {\n      if (verse.dateVersement) if (!lastVersementDate) {\n        lastVersementDate = new Date(verse.dateVersement.toString());\n      } else if (new Date(lastVersementDate.toString()).getTime() < new Date(verse.dateVersement.toString()).getTime()) {\n        lastVersementDate = new Date(verse.dateVersement.toString());\n      }\n    }\n    return lastVersementDate;\n  }\n  openDialogBox(enterDuration, exitDuration, pret, index) {\n    console.log(pret);\n    this.dialogBox.open(BuyPretDialogComponent, {\n      width: '400px',\n      enterAnimationDuration: enterDuration,\n      exitAnimationDuration: exitDuration,\n      data: pret\n    }).afterClosed().subscribe(data => {\n      if (data && data.data) {\n        console.log(\"close\", data.data);\n        let tempVerse = [];\n        if (this.dataVerse.has(data.data.pret?.id)) {\n          tempVerse = this.dataVerse.get(data.data.pret?.id);\n          tempVerse.push(data.data);\n          this.dataVerse.set(data.data.pret?.id, tempVerse);\n        } else {\n          tempVerse = [];\n          tempVerse.push(data.data);\n          this.dataVerse.set(data.data.pret?.id, tempVerse);\n        }\n        this.dejaVerse[index] += Number(data.data.montant);\n        this.restes[index] -= Number(data.data.montant);\n      }\n      this.cdr.markForCheck();\n    });\n  }\n  static #_ = this.ɵfac = function BuyPretComponent_Factory(t) {\n    return new (t || BuyPretComponent)(i0.ɵɵdirectiveInject(i1.EpargneService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BuyPretComponent,\n    selectors: [[\"app-buy-pret\"]],\n    decls: 38,\n    vars: 4,\n    consts: [[1, \"content\"], [1, \"tab\"], [1, \"pan\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"position\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"name\"], [\"matColumnDef\", \"montant\"], [\"matColumnDef\", \"pret\"], [\"matColumnDef\", \"datePret\"], [\"matColumnDef\", \"rembourse\"], [\"matColumnDef\", \"verser\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"rowHeight\", \"50px\", 3, \"cols\"], [\"title\", \"INFORMATION\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [1, \"lab\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"success\", 4, \"ngIf\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"success\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function BuyPretComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"span\", 2);\n        i0.ɵɵelementStart(3, \"table\", 3);\n        i0.ɵɵelementContainerStart(4, 4);\n        i0.ɵɵtemplate(5, BuyPretComponent_th_5_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(6, BuyPretComponent_td_6_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(7, 7);\n        i0.ɵɵtemplate(8, BuyPretComponent_th_8_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(9, BuyPretComponent_td_9_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(10, 8);\n        i0.ɵɵtemplate(11, BuyPretComponent_th_11_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(12, BuyPretComponent_td_12_Template, 3, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(13, 9);\n        i0.ɵɵtemplate(14, BuyPretComponent_th_14_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(15, BuyPretComponent_td_15_Template, 3, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(16, 10);\n        i0.ɵɵtemplate(17, BuyPretComponent_th_17_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(18, BuyPretComponent_td_18_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(19, 11);\n        i0.ɵɵtemplate(20, BuyPretComponent_th_20_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(21, BuyPretComponent_td_21_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(22, 12);\n        i0.ɵɵtemplate(23, BuyPretComponent_th_23_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(24, BuyPretComponent_td_24_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 13);\n        i0.ɵɵtemplate(26, BuyPretComponent_th_26_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(27, BuyPretComponent_td_27_Template, 3, 2, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(28, BuyPretComponent_tr_28_Template, 1, 0, \"tr\", 14);\n        i0.ɵɵtemplate(29, BuyPretComponent_tr_29_Template, 1, 0, \"tr\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"span\", 2)(31, \"mat-grid-list\", 16);\n        i0.ɵɵelement(32, \"mat-grid-tile-header\", 17)(33, \"mat-grid-tile\")(34, \"mat-grid-tile\")(35, \"mat-grid-tile\")(36, \"mat-grid-tile\")(37, \"mat-grid-tile\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource.slice());\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"cols\", 3);\n      }\n    },\n    dependencies: [i4.NgIf, i5.MatButton, i6.MatTable, i6.MatHeaderCellDef, i6.MatHeaderRowDef, i6.MatColumnDef, i6.MatCellDef, i6.MatRowDef, i6.MatHeaderCell, i6.MatCell, i6.MatHeaderRow, i6.MatRow, i7.MatGridList, i7.MatGridTile, i7.MatGridTileText, i7.MatGridTileHeaderCssMatStyler, i4.DatePipe],\n    styles: [\".content[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.tab[_ngcontent-%COMP%] {\\n  width: 85%;\\n  margin: 45px 0 75px 0;\\n  background-color: rgba(255, 255, 255, 0.6);\\n  -webkit-backdrop-filter: blur(10px);\\n          backdrop-filter: blur(10px);\\n  border: 1px solid rgba(255, 255, 255, 0.7);\\n  border-radius: 10px;\\n  padding: 0 40px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  width: 65%;\\n  height: 50%;\\n  background: none;\\n  box-shadow: none;\\n}\\n\\n.echec[_ngcontent-%COMP%] {\\n  display: inline-flex;\\n  min-width: 35px;\\n}\\n\\n.pan[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  padding: 15px 0 0 0;\\n}\\n.pan[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 95%;\\n  margin: 10px;\\n}\\n.pan[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%] {\\n  margin-top: 25px;\\n  width: 95%;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-evenly;\\n}\\n\\n.lab[_ngcontent-%COMP%] {\\n  color: royalblue;\\n}\\n\\n.inf[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-evenly;\\n  margin: 5px 0 10px 0;\\n  font-weight: bold;\\n}\\n\\n.success[_ngcontent-%COMP%] {\\n  color: royalblue;\\n}\\n\\n.mat-mdc-row[_ngcontent-%COMP%]   .ben[_ngcontent-%COMP%] {\\n  background-color: rgba(255, 223, 126, 0.75) !important;\\n}\\n\\nmat-grid-list[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvdGVjdGVkL2J1eS1wcmV0L2J1eS1wcmV0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9CQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFuQkY7O0FBcUJBO0VBQ0UsVUFBQTtFQUNBLHFCQUFBO0VBbEJFLDBDQUFBO0VBQ0EsbUNBQUE7VUFBQSwyQkFBQTtFQUVBLDBDQUFBO0VBQ0EsbUJBQUE7RUFnQkYsZUFBQTtBQWZGOztBQWtCQTtFQUNFLFVBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtBQWZGOztBQWtCQTtFQUNFLG9CQUFBO0VBQ0EsZUFBQTtBQWZGOztBQWlCQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7QUFkRjtBQWtCRTtFQUNFLFVBQUE7RUFDQSxZQUFBO0FBaEJKO0FBbUJFO0VBQ0UsZ0JBQUE7RUFDQSxVQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsNkJBQUE7QUFqQko7O0FBMkJBO0VBQ0UsZ0JBQUE7QUF4QkY7O0FBMEJBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDZCQUFBO0VBQ0Esb0JBQUE7RUFDQSxpQkFBQTtBQXZCRjs7QUF5QkE7RUFDRSxnQkFBQTtBQXRCRjs7QUEwQkU7RUFDRSxzREFBQTtBQXZCSjs7QUEwQkE7RUFDRSxXQUFBO0FBdkJGIiwic291cmNlc0NvbnRlbnQiOlsiQG1peGluIGdsYXNzLW1vcnBoKCR0eXBlKXtcbiAgQGlmICR0eXBlID09IDF7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcbiAgICBjb2xvcjogI2VmZWZlZjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7XG4gICAgYm9yZGVyLXJhZGl1czogMSU7XG4gICAgLy9ib3gtc2hhZG93OiAwIDI1cHggMzVweCAjMjYyNjI2Y2M7XG5cbiAgfVxuICBAaWYgJHR5cGUgPT0gMntcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7XG4gICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpO1xuICAgIC8vY29sb3I6ICNlZmVmZWY7XG4gICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgLy9ib3gtc2hhZG93OiAwIDI1cHggMzVweCAjMjYyNjI2Y2M7XG5cbiAgfVxufVxuLmNvbnRlbnR7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuLnRhYntcbiAgd2lkdGg6IDg1JTtcbiAgbWFyZ2luOiA0NXB4IDAgNzVweCAwO1xuICBAaW5jbHVkZSBnbGFzcy1tb3JwaCgyKTtcbiAgcGFkZGluZzogMCA0MHB4O1xufVxuXG50YWJsZXtcbiAgd2lkdGg6IDY1JTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJveC1zaGFkb3c6IG5vbmU7XG5cbn1cbi5lY2hlY3tcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIG1pbi13aWR0aDogMzVweDtcbn1cbi5wYW57XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcGFkZGluZzogMTVweCAwIDAgMDtcblxuXG5cbiAgYnV0dG9ue1xuICAgIHdpZHRoOiA5NSU7XG4gICAgbWFyZ2luOiAxMHB4O1xuICB9XG5cbiAgdGZvb3R7XG4gICAgbWFyZ2luLXRvcDogMjVweDtcbiAgICB3aWR0aDogOTUlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcbiAgfVxufVxudHJ7XG4gIC8vYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMjAsIDIwLCA2MCwgMC4yKTtcbiAgLy9iYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDI1NSwgMTI3LCAwLjEpO1xufVxudHI6aG92ZXJ7XG4gIC8vYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMjAsIDIwLCA2MCwgMC4yKTtcbn1cbi5sYWJ7XG4gIGNvbG9yOiByb3lhbGJsdWU7XG59XG4uaW5me1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XG4gIG1hcmdpbjogNXB4IDAgMTBweCAwO1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cbi5zdWNjZXNze1xuICBjb2xvcjogcm95YWxibHVlO1xufVxuXG4ubWF0LW1kYy1yb3d7XG4gIC5iZW57XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDIyMywgMTI2LCAwLjc1KSAhaW1wb3J0YW50O1xuICB9XG59XG5tYXQtZ3JpZC1saXN0e1xuICB3aWR0aDogMTAwJTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}\nexport { BuyPretComponent };","map":{"version":3,"names":["getDetteMontant","BuyPretDialogComponent","forkJoin","tap","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","i_r19","element_r20","epargnant","membre","nom","ɵɵtextInterpolate","element_r21","montant","ctx_r7","getPretvalue","i_r24","element_r25","datePret","ctx_r11","restes","i_r27","ctx_r13","dejaVerse","i_r29","ɵɵlistener","BuyPretComponent_td_27_button_1_Template_button_click_0_listener","ɵɵrestoreView","_r36","ctx_r35","ɵɵnextContext","element_r30","$implicit","i_r31","index","ctx_r34","ɵɵresetView","openDialogBox","ɵɵpipeBind2","ctx_r33","lastVersementDate","ɵɵtemplate","BuyPretComponent_td_27_button_1_Template","BuyPretComponent_td_27_h4_2_Template","ɵɵproperty","ctx_r15","isDone","ɵɵelement","BuyPretComponent","constructor","epargneService","activatedRoute","dialogBox","cdr","displayedColumns","dataSource","dataVerse","Map","ngOnInit","snapshot","tempVerse","epargne","JSON","parse","params","pretCall","getDetteByEpargnes","Number","id","verseCall","getAllVerseByEpargnes","pipe","data","console","log","verse","pret","has","get","push","set","i","somme","subscribe","markForCheck","checkBuy","element","versements","dateVersement","Date","toString","getTime","enterDuration","exitDuration","open","width","enterAnimationDuration","exitAnimationDuration","afterClosed","_","ɵɵdirectiveInject","i1","EpargneService","i2","ActivatedRoute","i3","MatDialog","ChangeDetectorRef","_2","selectors","decls","vars","consts","template","BuyPretComponent_Template","rf","ctx","ɵɵelementContainerStart","BuyPretComponent_th_5_Template","BuyPretComponent_td_6_Template","ɵɵelementContainerEnd","BuyPretComponent_th_8_Template","BuyPretComponent_td_9_Template","BuyPretComponent_th_11_Template","BuyPretComponent_td_12_Template","BuyPretComponent_th_14_Template","BuyPretComponent_td_15_Template","BuyPretComponent_th_17_Template","BuyPretComponent_td_18_Template","BuyPretComponent_th_20_Template","BuyPretComponent_td_21_Template","BuyPretComponent_th_23_Template","BuyPretComponent_td_24_Template","BuyPretComponent_th_26_Template","BuyPretComponent_td_27_Template","BuyPretComponent_tr_28_Template","BuyPretComponent_tr_29_Template","slice"],"sources":["/home/ked/backups/Angular/DanguiUi/src/app/protected/buy-pret/buy-pret.component.ts","/home/ked/backups/Angular/DanguiUi/src/app/protected/buy-pret/buy-pret.component.html"],"sourcesContent":["import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {EpargneService} from \"../../Services/epargne.service\";\nimport {Epargne} from \"../../../Models/Entitys/Epargne\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {Pret} from \"../../../Models/Entitys/Pret\";\nimport {getDetteMontant} from \"../../metier/getDetteMontant\";\nimport {MatDialog} from \"@angular/material/dialog\";\nimport {BuyPretDialogComponent} from \"../../dialogbox/buy-pret-dialog/buy-pret-dialog.component\";\nimport {Versement} from \"../../../Models/Entitys/Versement\";\nimport {forkJoin, tap} from \"rxjs\";\n\n@Component({\n  selector: 'app-buy-pret',\n  templateUrl: './buy-pret.component.html',\n  styleUrls: ['./buy-pret.component.scss']\n})\nexport class BuyPretComponent implements  OnInit {\n\n  displayedColumns: string[] = ['position', 'name', 'montant','pret','datePret','rembourse', 'verser', 'action'];\n  dataSource:Pret[]=[];\n  epargne!: Epargne;\n  dataVerse: Map<number,Versement[]> = new Map<number,Versement[]>();\n  dejaVerse: number[] = [];\n  restes:number[] = [];\n\n\n\n    constructor(private epargneService:EpargneService,\n              private activatedRoute:ActivatedRoute,\n              private dialogBox:MatDialog,\n                private cdr:ChangeDetectorRef\n              ) {\n  }\n\n  ngOnInit() {\n\n    let snapshot = this.activatedRoute.snapshot;\n    let tempVerse : Versement[] = [];\n    this.epargne = JSON.parse(snapshot.params[\"ep\"]);\n    let pretCall = this.epargneService.getDetteByEpargnes(Number(this.epargne.id));\n    let verseCall = this.epargneService.getAllVerseByEpargnes(Number(this.epargne.id));\n\n    forkJoin([pretCall,verseCall]).pipe(\n        tap(\n        data =>{\n            this.dataSource = data[0];\n            console.log(\"########## is done ##########\",data[0],data[1]);\n            for (let verse of data[1]){\n                if(verse.pret?.id){\n                    if(this.dataVerse.has(verse.pret?.id)){\n                        tempVerse = <Versement[]> this.dataVerse.get(verse.pret.id);\n                        tempVerse.push(verse);\n                        this.dataVerse.set(verse.pret.id,tempVerse);\n                    }\n                    else {\n                        tempVerse = [];\n                        tempVerse.push(verse);\n                        this.dataVerse.set(verse.pret.id,tempVerse);\n                    }\n                }\n            }\n            console.log(\"dataverse : \",this.dataVerse);\n\n            let i = 0;\n            for (let pret of this.dataSource){\n                if(!this.dataVerse.has(Number(pret.id))){\n                    this.dejaVerse.push(0);\n                    this.restes.push(this.getPretvalue(i));\n                }\n                else {\n                    let somme = 0;\n                    // if(this.dataVerse.get(Number(pret.id)))\n                    for (let verse of <Versement[]> this.dataVerse.get(Number(pret.id))){\n                        somme += Number(verse.montant);\n                    }\n                    this.dejaVerse.push(somme);\n                    this.restes.push(this.getPretvalue(i)-somme);\n                }\n                i++;\n            }\n\n        }\n    ),).subscribe(\n        ()=>{\n            this.cdr.markForCheck();\n        }\n    );\n  }\n\n    checkBuy(element:any) {\n        return false;\n    }\n\n    getPretvalue(index:number){\n        let versements:Versement[] = this.dataVerse.get(Number(this.dataSource[index].id))? <Versement[]> this.dataVerse.get(Number(this.dataSource[index].id)):[];\n      return  getDetteMontant(this.dataSource[index],versements);\n    }\n\n    isDone(index:number){\n        return this.restes[index] <= 0? false:true;\n    }\n\n    lastVersementDate(index:number){\n\n        let lastVersementDate;\n\n        for (let verse of <Versement[]> this.dataVerse.get(index)){\n            if (verse.dateVersement)\n                if(!lastVersementDate){\n                    lastVersementDate = new Date(verse.dateVersement.toString());\n                }else if (new Date(lastVersementDate.toString()).getTime()<new Date(verse.dateVersement.toString()).getTime()){\n                    lastVersementDate = new Date(verse.dateVersement.toString());\n                }\n        }\n        return lastVersementDate;\n    }\n\n  openDialogBox(enterDuration:number,exitDuration:number,pret:Pret,index:number){\n    console.log(pret);\n    this.dialogBox.open(BuyPretDialogComponent,{\n      width:'400px',\n      enterAnimationDuration:enterDuration,\n      exitAnimationDuration:exitDuration,\n      data:pret,\n    }).afterClosed().subscribe(\n        data =>{\n          if (data && data.data) {\n            console.log(\"close\",data.data);\n              let tempVerse : Versement[] = [];\n              if(this.dataVerse.has(data.data.pret?.id)){\n                  tempVerse = <Versement[]> this.dataVerse.get(data.data.pret?.id);\n                  tempVerse.push(data.data);\n                  this.dataVerse.set(data.data.pret?.id,tempVerse);\n              }\n              else {\n                  tempVerse = [];\n                  tempVerse.push(data.data);\n                  this.dataVerse.set(data.data.pret?.id,tempVerse);\n              }\n\n              this.dejaVerse[index] += Number(data.data.montant);\n              this.restes[index] -= Number(data.data.montant);\n\n\n\n          }\n            this.cdr.markForCheck();\n        }\n    );\n\n  }\n}\n","<div class=\"content\">\n    <div class=\"tab\">\n    <span class=\"pan\">\n<!--      <h4> {{cot.nom}}</h4>-->\n<!--      <h1>Seance {{cot.rang}}</h1>-->\n    </span>\n        <table mat-table [dataSource]=\"dataSource.slice()\" class=\"mat-elevation-z8\">\n\n            <!--- Note that these columns can be defined in any order.\n                  The actual rendered columns are set as a property on the row definition\" -->\n\n            <!-- Position Column -->\n            <ng-container matColumnDef=\"position\">\n                <th mat-header-cell *matHeaderCellDef> No. </th>\n                <td mat-cell *matCellDef=\"let element,let i = index \" > {{i+1}} </td>\n            </ng-container>\n\n            <!-- Name Column -->\n            <ng-container matColumnDef=\"name\">\n                <th mat-header-cell *matHeaderCellDef> Nom </th>\n                <td mat-cell *matCellDef=\"let element\" > {{element.epargnant.membre.nom}} </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"montant\">\n                <th mat-header-cell *matHeaderCellDef> Montant </th>\n                <td mat-cell *matCellDef=\"let element, index as i\" >\n                    <span class=\"lab\">{{element.montant}}</span>\n                </td>\n            </ng-container>\n            <!-- Weight Column -->\n            <ng-container matColumnDef=\"pret\">\n                <th mat-header-cell *matHeaderCellDef> Montant + interet </th>\n                <td mat-cell *matCellDef=\"let element, index as i\" >\n                    <span class=\"lab\">{{getPretvalue(i)}}</span>\n                </td>\n            </ng-container>\n\n            <!-- Symbol Column -->\n            <ng-container matColumnDef=\"datePret\">\n                <th mat-header-cell *matHeaderCellDef> Date pret </th>\n                <td mat-cell *matCellDef=\"let element\" > {{element.datePret}} </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"rembourse\">\n                <th mat-header-cell *matHeaderCellDef> Reste a Verser </th>\n                <td mat-cell *matCellDef=\"let element, index as i\" > {{restes[i]}} </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"verser\">\n                <th mat-header-cell *matHeaderCellDef> Deja verser </th>\n                <td mat-cell *matCellDef=\"let element, index as i\">{{dejaVerse[i]}}</td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"action\">\n                <th mat-header-cell *matHeaderCellDef>Payer</th>\n                <td mat-cell *matCellDef=\"let element, index as i\">\n                    <button mat-flat-button color=\"primary\" *ngIf=\"isDone(i)\"\n                            (click)=\"openDialogBox(300,100,element,i)\"> Payer </button>\n\n                <h4 class=\"success\" *ngIf=\"!isDone(i)\">Paye le :{{lastVersementDate(i)|date:\"yyyy-MM-dd\"}}</h4>\n                </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n\n        </table>\n        <span class=\"pan\">\n        <mat-grid-list [cols]=\"3\" rowHeight=\"50px\">\n            <mat-grid-tile-header title=\"INFORMATION\"></mat-grid-tile-header>\n            <mat-grid-tile>\n<!--                <span> Bénéficiaire: {{cot.beneficiaire?.enregistrement?.membre?.nom}} </span>-->\n            </mat-grid-tile>\n            <mat-grid-tile>\n<!--                <span> Avalise: {{cot.beneficiaire?.avaliste?.membre?.nom}} </span>-->\n            </mat-grid-tile>\n<!--            <mat-grid-tile *ngIf=\"tontine?.type?.code==1\">-->\n<!--                <span> Supplement : {{cot.supplement|money}} </span>-->\n<!--            </mat-grid-tile>-->\n            <mat-grid-tile>\n<!--                <span *ngIf=\"cot.complement!=null\"> Complement: {{cot.complement|money}} </span>-->\n            </mat-grid-tile>\n            <mat-grid-tile>\n<!--                <span> Taux: {{cot.tauxTontine|money}} </span>-->\n            </mat-grid-tile>\n            <mat-grid-tile>\n<!--                <span> Taux Echec: {{cot.tauxEchec|money}} </span>-->\n            </mat-grid-tile>\n        </mat-grid-list>\n            <!--      <span class=\"inf\">-->\n            <!--        <span> Avalise: {{cot.beneficiaire?.avaliste?.membre?.nom}} </span>-->\n            <!--        <span *ngIf=\"cot.complement!=null\"> Complement: {{cot.complement|money}} </span><span *ngIf=\"cot.complement!=null\"> Complement: {{cot.complement|money}} </span>-->\n            <!--      </span>-->\n            <!--      <span class=\"inf\">-->\n            <!--        <span> Taux Echec: {{cot.tauxEchec|money}} </span>-->\n            <!--      </span>-->\n    </span>\n    </div>\n</div>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}