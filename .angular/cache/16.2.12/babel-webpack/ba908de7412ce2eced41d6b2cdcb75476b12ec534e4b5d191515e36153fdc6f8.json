{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { forkJoin } from \"rxjs\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nlet TontineBilanComponent = class TontineBilanComponent {\n  constructor(router, tontineService, bilanServ, authserv) {\n    this.router = router;\n    this.tontineService = tontineService;\n    this.bilanServ = bilanServ;\n    this.authserv = authserv;\n    this.displayedColumns = ['S', 'Date', 'Cot.', 'T.V.', 'Comp.', 'Supl.', 'Boi.', 'Ret.', 'E.P.', 'E.N.P.', 'bt'];\n    this.displayedSimpleColumns = ['S', 'Date', 'Cot.', 'Ret.', 'E.P.', 'E.N.P.', 'bt'];\n    this.dataSource = [];\n    this.nbParts = [];\n    this.nbRetards = [];\n    this.nbPaidEchec = [];\n    this.nbNonPaidEchec = [];\n    this.nom = \"\";\n    this.nbToureGratuit = 0;\n    this.totalRetrad = 0;\n    this.totalEchecPaid = 0;\n    this.TotalComplement = 0;\n    this.totalTontine = 0;\n    this.totalEchecNonPaid = 0;\n    this.total = 0;\n    this.totalBoisson = 0;\n    this.totalGratuit = 0;\n    this.displayedFooterColumns = ['label', 'total', 'totalComplement', 'totalSuplement', 'boisson', 'totalRt', 'totalE.P', 'totalE.N.P', 'space'];\n    this.displayedFooterSimpleColumns = ['label', 'total', 'totalComplement', 'totalRt', 'totalE.P', 'totalE.N.P', 'space'];\n    this.type = \"Vente\";\n    this.lableColspan = 3;\n    this.totalSupplement = 0;\n    this.role = \"\";\n  }\n  ngOnInit() {\n    this.idTontine = this.router.snapshot.params[\"id\"];\n    this.role = this.authserv.role;\n    this.tontine = JSON.parse(this.router.snapshot.queryParams[\"ton\"]);\n    let cotsCall = this.tontineService.getCotisation(this.idTontine);\n    let nbCotsCall = this.bilanServ.getNbCotisation(this.idTontine);\n    let nbRetardCall = this.bilanServ.getNbRetard(this.idTontine);\n    let nbPaidCall = this.bilanServ.getNbPaidEchec(this.idTontine);\n    let nbNonPaidsCall = this.bilanServ.getNbNonPaidEchec(this.idTontine);\n    forkJoin([cotsCall, nbCotsCall, nbRetardCall, nbPaidCall, nbNonPaidsCall]).subscribe(data => {\n      this.dataSource = data[0];\n      if (this.dataSource.length > 0) this.nom = data[0][0].nom;\n      for (let cot of data[0]) {\n        if (cot.gratuit) this.nbToureGratuit++;\n      }\n      this.nbParts = data[1];\n      this.nbRetards = data[2];\n      this.nbPaidEchec = data[3];\n      this.nbNonPaidEchec = data[4];\n      this.type = this.tontine.type.nom;\n      if (this.type == \"Vente\") this.lableColspan = 3;\n      if (this.type == \"Simple\") this.lableColspan = 2;\n    });\n  }\n  ngDoCheck() {\n    // this.total=this.getTotal();\n  }\n  getTableHeader() {\n    if (this.type == \"Vente\") return this.displayedColumns;else return this.displayedSimpleColumns;\n  }\n  getTableFooter() {\n    if (this.type == \"Vente\") return this.displayedFooterColumns;else return this.displayedFooterSimpleColumns;\n  }\n  // renvoi le nombre de participation qu'il y'a eu a une cotisation\n  nbPart(idCot, rang) {\n    let cot = this.dataSource[rang - 1];\n    for (let part of this.nbParts) {\n      if (part[0] == idCot) {\n        return part[1];\n      }\n    }\n    return 0;\n  }\n  nbPaid(idCot, rang) {\n    let cot = this.dataSource[rang - 1];\n    for (let echec of this.nbPaidEchec) {\n      if (echec[0] == idCot) {\n        return echec[1] * (cot.tauxEchec + cot.tauxTontine);\n      }\n    }\n    return 0;\n  }\n  // renvoi le suplement a une cotisation\n  getSupl(rang) {\n    let cot = this.dataSource[rang - 1];\n    let nbcotise = this.nbPart(Number(cot.id), rang);\n    let dif = nbcotise - this.tontine.nbSeances;\n    if (dif <= 0) return 0;\n    return dif * this.tontine.tauxTontine;\n  }\n  nbNonPaid(idCot, rang) {\n    let cot = this.dataSource[rang - 1];\n    for (let ct of this.dataSource) {\n      if (ct.id == idCot) cot = ct;\n    }\n    // console.log(rang);\n    for (let echec of this.nbNonPaidEchec) {\n      if (echec[0] == idCot) {\n        // console.log(\"echec\",echec[1]*cot.tauxEchec);\n        return echec[1] * cot.tauxEchec;\n      }\n    }\n    // console.log(0);\n    return 0;\n  }\n  nbRetard(idCot, rang) {\n    let cot = this.dataSource[rang - 1];\n    for (let retar of this.nbRetards) {\n      if (retar[0] == idCot) {\n        if (this.type == \"Vente\") return retar[1] * cot.tauxEchec;\n        if (this.type == \"Simple\") return retar[1] * this.tontine.tauxRetard;\n      }\n    }\n    return 0;\n  }\n  getTotal() {\n    this.total = 0;\n    this.totalTontine = 0;\n    this.totalEchecPaid = 0;\n    this.totalRetrad = 0;\n    this.TotalComplement = 0;\n    this.totalBoisson = 0;\n    this.totalGratuit = 0;\n    this.totalEchecNonPaid = 0;\n    this.totalSupplement = 0;\n    for (let cot of this.dataSource) {\n      if (this.type == \"Vente\") {\n        this.totalTontine += cot.tauxVente;\n        if (cot.id) if (this.nbPart(cot.id, cot.rang) > this.tontine.nbSeances) {\n          this.totalSupplement += (this.nbPart(cot.id, cot.rang) - this.tontine.nbSeances) * cot.tauxTontine;\n        }\n      }\n      if (this.type == \"Simple\") this.totalTontine += this.tontine.tauxTontine;\n      this.TotalComplement += cot.complement;\n      this.totalBoisson += cot.tauxTontine;\n      if (cot.gratuit && cot.id) {\n        this.totalGratuit += cot.tauxTontine * this.nbPart(cot.id, cot.rang);\n      }\n      for (let retar of this.nbRetards) {\n        if (retar[0] == cot.id) {\n          if (this.type == \"Vente\") this.totalRetrad += retar[1] * cot.tauxEchec;\n          if (this.type == \"Simple\") this.totalRetrad += retar[1] * this.tontine.tauxRetard;\n        }\n      }\n      for (let echec of this.nbPaidEchec) {\n        if (echec[0] == cot.id) {\n          if (this.type == \"Vente\") this.totalEchecPaid += echec[1] * (cot.tauxEchec + cot.tauxTontine);\n          if (this.type == \"Simple\") this.totalEchecPaid += echec[1] * (this.tontine.tauxEchec + cot.tauxTontine);\n        }\n      }\n      for (let echec of this.nbNonPaidEchec) {\n        if (echec[0] == cot.id) {\n          if (this.type == \"Vente\") this.totalEchecNonPaid += echec[1] * cot.tauxEchec;\n          if (this.type == \"Simple\") this.totalEchecNonPaid += echec[1] * this.tontine.tauxEchec;\n        }\n      }\n    }\n    // console.log(this.totalGratuit);\n    return this.totalTontine + this.totalRetrad + this.totalEchecPaid + this.totalSupplement - (this.TotalComplement + this.totalBoisson + this.totalGratuit);\n  }\n  getClass(elm) {\n    if (elm.gratuit) return \"gratuit\";\n    return \"nonGratuit\";\n  }\n  openOrClose() {\n    this.tontine.actif = !this.tontine.actif;\n    this.tontineService.saveTontine(this.tontine).subscribe(data => {\n      console.log(data);\n    });\n  }\n  openPDF() {\n    var part = [];\n    let i = 0;\n    const options = {\n      startY: 20,\n      startX: 20\n    };\n    const doc = new jsPDF();\n    doc.text(\"Bilan de la Tontine : \" + String(this.tontine?.nom).slice(16), 10, 7);\n    autoTable(doc, {\n      html: '#htmlData',\n      startY: 21\n    });\n    doc.save('Tontine ' + this.tontine?.nom + '.pdf');\n  }\n};\nTontineBilanComponent = __decorate([Component({\n  selector: 'app-tontine-bilan',\n  templateUrl: './tontine-bilan.component.html',\n  styleUrls: ['./tontine-bilan.component.scss']\n})], TontineBilanComponent);\nexport { TontineBilanComponent };","map":{"version":3,"names":["Component","forkJoin","jsPDF","autoTable","TontineBilanComponent","constructor","router","tontineService","bilanServ","authserv","displayedColumns","displayedSimpleColumns","dataSource","nbParts","nbRetards","nbPaidEchec","nbNonPaidEchec","nom","nbToureGratuit","totalRetrad","totalEchecPaid","TotalComplement","totalTontine","totalEchecNonPaid","total","totalBoisson","totalGratuit","displayedFooterColumns","displayedFooterSimpleColumns","type","lableColspan","totalSupplement","role","ngOnInit","idTontine","snapshot","params","tontine","JSON","parse","queryParams","cotsCall","getCotisation","nbCotsCall","getNbCotisation","nbRetardCall","getNbRetard","nbPaidCall","getNbPaidEchec","nbNonPaidsCall","getNbNonPaidEchec","subscribe","data","length","cot","gratuit","ngDoCheck","getTableHeader","getTableFooter","nbPart","idCot","rang","part","nbPaid","echec","tauxEchec","tauxTontine","getSupl","nbcotise","Number","id","dif","nbSeances","nbNonPaid","ct","nbRetard","retar","tauxRetard","getTotal","tauxVente","complement","getClass","elm","openOrClose","actif","saveTontine","console","log","openPDF","i","options","startY","startX","doc","text","String","slice","html","save","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/ked/backups/Angular/DanguiUi/src/app/protected/showtontine/tontine-bilan/tontine-bilan.component.ts"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {Cotisation} from \"../../../../Models/Entitys/Cotisation\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {TontineServiceService} from \"../../../Services/tontine-service.service\";\nimport {Tontine} from \"../../../../Models/Abstracts/Tontine\";\nimport {BilanServiceService} from \"../../../Services/bilan-service.service\";\nimport {forkJoin} from \"rxjs\";\nimport {AuthService} from \"../../../Services/auth.service\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\n@Component({\n  selector: 'app-tontine-bilan',\n  templateUrl: './tontine-bilan.component.html',\n  styleUrls: ['./tontine-bilan.component.scss']\n})\nexport class TontineBilanComponent implements OnInit{\n\n\n  displayedColumns: string[] = ['S','Date','Cot.','T.V.','Comp.','Supl.','Boi.','Ret.','E.P.','E.N.P.','bt'];\n  displayedSimpleColumns: string[] = ['S','Date','Cot.','Ret.','E.P.','E.N.P.','bt'];\n  dataSource : Cotisation[] = [];\n  nbParts:number[][]=[];\n  nbRetards:number[][]=[]\n  nbPaidEchec:number[][]=[];\n  nbNonPaidEchec:number[][]=[];\n  idTontine!:number;\n  nom:string=\"\";\n  nbToureGratuit:number=0;\n  totalRetrad =0 ;totalEchecPaid =0; TotalComplement  = 0;\n  totalTontine =0; totalEchecNonPaid=0;\n  total=0;\n  totalBoisson=0;\n  totalGratuit=0;\n  displayedFooterColumns= ['label','total','totalComplement','totalSuplement','boisson','totalRt','totalE.P','totalE.N.P','space'];\n  displayedFooterSimpleColumns= ['label','total','totalComplement','totalRt','totalE.P','totalE.N.P','space'];\n  tontine!:Tontine;\n  type=\"Vente\";\n  lableColspan=3;\n  totalSupplement=0;\n  role=\"\";\n\n  constructor(\n    private router:ActivatedRoute,private tontineService:TontineServiceService,\n    private bilanServ:BilanServiceService,private authserv:AuthService) {\n  }\n  ngOnInit() {\n\n    this.idTontine=this.router.snapshot.params[\"id\"];\n    this.role=this.authserv.role;\n    this.tontine=JSON.parse(this.router.snapshot.queryParams[\"ton\"]);\n\n    let cotsCall=this.tontineService.getCotisation(this.idTontine);\n    let nbCotsCall = this.bilanServ.getNbCotisation(this.idTontine);\n\n    let nbRetardCall = this.bilanServ.getNbRetard(this.idTontine);\n\n    let nbPaidCall = this.bilanServ.getNbPaidEchec(this.idTontine);\n\n    let nbNonPaidsCall = this.bilanServ.getNbNonPaidEchec(this.idTontine);\n\n    forkJoin([cotsCall,nbCotsCall,nbRetardCall,nbPaidCall,nbNonPaidsCall]).subscribe(data=>{\n      this.dataSource = data[0];\n      if(this.dataSource.length>0)\n        this.nom=data[0][0].nom;\n      for (let cot of data[0]){\n        if(cot.gratuit)\n          this.nbToureGratuit++;\n      }\n      this.nbParts = data[1];\n      this.nbRetards = data[2];\n      this.nbPaidEchec =data[3];\n      this.nbNonPaidEchec =data[4];\n\n      this.type=this.tontine.type.nom;\n      if(this.type==\"Vente\")\n        this.lableColspan=3;\n      if (this.type==\"Simple\")\n        this.lableColspan=2;\n\n    })\n  }\n\n  ngDoCheck() {\n    // this.total=this.getTotal();\n\n  }\n\n\n  getTableHeader(){\n    if (this.type==\"Vente\")\n      return this.displayedColumns;\n    else\n      return this.displayedSimpleColumns;\n  }\n  getTableFooter(){\n    if (this.type==\"Vente\")\n      return this.displayedFooterColumns;\n    else\n      return this.displayedFooterSimpleColumns;\n  }\n\n  // renvoi le nombre de participation qu'il y'a eu a une cotisation\n  nbPart(idCot:number,rang:number){\n    let cot =this.dataSource[rang-1];\n    for(let part of this.nbParts ){\n\n      if(part[0]==idCot){\n        return part[1];\n      }\n    }\n    return 0;\n  }\n\n  nbPaid(idCot:number,rang:number){\n    let cot =this.dataSource[rang-1];\n    for(let echec of this.nbPaidEchec ){\n\n      if(echec[0]==idCot){\n        return echec[1]*(cot.tauxEchec+cot.tauxTontine);\n      }\n    }\n    return 0;\n  }\n\n  // renvoi le suplement a une cotisation\n  getSupl(rang:number){\n\n    let cot = this.dataSource[rang-1];\n    let nbcotise = this.nbPart(Number(cot.id),rang);\n    let dif= nbcotise-this.tontine.nbSeances;\n    if (dif<=0)\n      return 0;\n\n    return dif*this.tontine.tauxTontine;\n\n  }\n  nbNonPaid(idCot:number,rang:number){\n    let cot :Cotisation= this.dataSource[rang-1];\n    for(let ct of this.dataSource){\n      if(ct.id==idCot)\n        cot=ct;\n    }\n    // console.log(rang);\n    for(let echec of this.nbNonPaidEchec ){\n\n      if(echec[0]==idCot){\n        // console.log(\"echec\",echec[1]*cot.tauxEchec);\n        return echec[1]*cot.tauxEchec;\n\n      }\n    }\n    // console.log(0);\n    return 0;\n\n  }\n\n  nbRetard(idCot:number,rang:number){\n    let cot =this.dataSource[rang-1];\n    for(let retar of this.nbRetards ){\n\n      if(retar[0]==idCot){\n        if(this.type==\"Vente\")\n          return retar[1]*cot.tauxEchec;\n        if(this.type==\"Simple\")\n          return retar[1]*this.tontine.tauxRetard;\n      }\n    }\n    return 0;\n  }\n\n  getTotal(){\n    this.total=0;\n    this.totalTontine = 0;\n    this.totalEchecPaid = 0;\n    this.totalRetrad =0;\n    this.TotalComplement = 0;\n    this.totalBoisson=0;\n    this.totalGratuit=0;\n    this.totalEchecNonPaid=0;\n    this.totalSupplement=0;\n    for (let cot of this.dataSource){\n\n      if (this.type==\"Vente\"){\n        this.totalTontine += cot.tauxVente;\n        if(cot.id)\n        if(this.nbPart(cot.id,cot.rang)>this.tontine.nbSeances){\n          this.totalSupplement+= ((this.nbPart(cot.id,cot.rang)-this.tontine.nbSeances)*cot.tauxTontine);\n        }\n      }\n      if (this.type==\"Simple\")\n        this.totalTontine += this.tontine.tauxTontine;\n      this.TotalComplement +=cot.complement;\n      this.totalBoisson +=cot.tauxTontine;\n      if (cot.gratuit && cot.id){\n        this.totalGratuit+=(cot.tauxTontine*this.nbPart(cot.id,cot.rang));\n      }\n\n        for(let retar of this.nbRetards ){\n          if(retar[0]==cot.id){\n            if(this.type==\"Vente\")\n              this.totalRetrad += retar[1]*cot.tauxEchec;\n            if(this.type==\"Simple\")\n              this.totalRetrad += retar[1]*this.tontine.tauxRetard;\n          }\n        }\n      for(let echec of this.nbPaidEchec ){\n\n        if(echec[0]==cot.id){\n          if(this.type==\"Vente\")\n            this.totalEchecPaid += echec[1]*(cot.tauxEchec+cot.tauxTontine);\n          if(this.type==\"Simple\")\n            this.totalEchecPaid += echec[1]*(this.tontine.tauxEchec+cot.tauxTontine);\n        }\n      }\n      for(let echec of this.nbNonPaidEchec ){\n\n        if(echec[0]==cot.id){\n          if(this.type==\"Vente\")\n            this.totalEchecNonPaid += echec[1]*(cot.tauxEchec);\n          if(this.type==\"Simple\")\n            this.totalEchecNonPaid += echec[1]*(this.tontine.tauxEchec);\n        }\n      }\n\n    }\n    // console.log(this.totalGratuit);\n    return ((this.totalTontine+this.totalRetrad+this.totalEchecPaid+this.totalSupplement) - (this.TotalComplement+this.totalBoisson+this.totalGratuit));\n\n  }\n\n  getClass(elm:Cotisation){\n    if(elm.gratuit)\n      return \"gratuit\";\n    return \"nonGratuit\";\n  }\n\n  openOrClose() {\n    this.tontine.actif= (!this.tontine.actif);\n    this.tontineService.saveTontine(this.tontine).subscribe(\n      data =>{\n        console.log(data);\n      }\n    )\n  }\n\n\n  public openPDF(): void {\n\n    var part=[];\n    let i =0;\n    const options = {\n      startY: 20, // Vertical position to start the table (in mm)\n      startX:20,\n    };\n    const doc = new jsPDF();\n      doc.text(\"Bilan de la Tontine : \"+String(this.tontine?.nom).slice(16), 10, 7);\n\n    autoTable(doc,{html:'#htmlData',startY:21});\n\n\n    doc.save('Tontine '+this.tontine?.nom+'.pdf');\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}