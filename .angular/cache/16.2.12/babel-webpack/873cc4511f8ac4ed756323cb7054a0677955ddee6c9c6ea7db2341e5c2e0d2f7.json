{"ast":null,"code":"import { FormControl } from \"@angular/forms\";\nimport { TypeTontine } from \"../../../Models/Entitys/TypeTontine\";\nimport { Vente } from \"../../../Models/Vente\";\nimport { Simple } from \"../../../Models/Simple\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../Services/tontine-service.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/core\";\nfunction CreatTontineComponent_mat_form_field_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Nombre max de seances:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 12);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreatTontineComponent_mat_form_field_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Montant du retard:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 13);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreatTontineComponent_mat_form_field_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Echec Non b\\u00E9n\\u00E9ficier: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 14);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreatTontineComponent_mat_form_field_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Echec d\\u00E9j\\u00E0 b\\u00E9n\\u00E9ficier:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 15);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreatTontineComponent_mat_form_field_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Montant Boisson:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 16);\n    i0.ɵɵelementEnd();\n  }\n}\nlet CreatTontineComponent = /*#__PURE__*/(() => {\n  class CreatTontineComponent {\n    constructor(formBuilder, router, tontineService) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.tontineService = tontineService;\n      this.Form = this.formBuilder.group({\n        intituler: \"\",\n        type: \"1\",\n        tauxTontine: new FormControl(0),\n        tauxEchecB: new FormControl(0),\n        tauxRetard: new FormControl(0),\n        tauxEchec: new FormControl(0),\n        frequence: \"\",\n        nbSeances: new FormControl(0),\n        boisson: new FormControl(0)\n      });\n    }\n    creat() {\n      console.log(this.Form);\n      let today = new Date();\n      let type = String(this.Form.value.type);\n      let tauxTontine = Number(this.Form.value.tauxTontine);\n      let tauxEchecB = Number(this.Form.value.tauxEchecB);\n      let tauxRetard = Number(this.Form.value.tauxRetard);\n      let tauxEchec = Number(this.Form.value.tauxEchec);\n      let frequence = this.Form.value.frequence;\n      let maxSceances = Number(this.Form.value.nbSeances);\n      let intituler = \"\";\n      let boisson = Number(this.Form.value.boisson);\n      let typeTontine;\n      let ton;\n      if (type == '1') {\n        typeTontine = new TypeTontine(1, \"Vente\", 1);\n        intituler = today.toLocaleString().slice(0, 10) + \"V\" + today.toLocaleString().slice(3, 5) + today.getFullYear().toString().slice(2, 4) + \"-\" + String(this.Form.value.intituler) + \" ( \" + tauxTontine + \"F )\";\n        ton = new Vente(null, true, intituler, typeTontine, tauxTontine, 0, 0, 1, new Date(), new Date(), maxSceances, null, boisson);\n      } else {\n        typeTontine = new TypeTontine(2, \"Simple\", 2);\n        intituler = today.toLocaleString().slice(0, 10) + \"S\" + today.toLocaleString().slice(3, 5) + today.getFullYear().toString().slice(2, 4) + \"-\" + String(this.Form.value.intituler) + \" ( \" + tauxTontine + \"F )\";\n        ton = new Simple(null, true, intituler, typeTontine, tauxTontine, tauxEchec, tauxEchecB, tauxRetard, 1, new Date(), new Date(), 0, boisson);\n      }\n      console.log(\"intitule:\", intituler);\n      this.tontineService.save(ton).subscribe(data => {\n        console.log(data);\n        this.router.navigateByUrl(\"public/member/add/\" + data.id);\n      });\n    }\n    static #_ = this.ɵfac = function CreatTontineComponent_Factory(t) {\n      return new (t || CreatTontineComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.TontineServiceService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CreatTontineComponent,\n      selectors: [[\"app-creat-tontine\"]],\n      decls: 28,\n      vars: 7,\n      consts: [[1, \"content\"], [1, \"list\"], [3, \"formGroup\", \"ngSubmit\"], [\"appearance\", \"outline\"], [\"id\", \"type\", \"placeholder\", \"Type\", \"formControlName\", \"type\", \"required\", \"\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"matInput\", \"\", \"id\", \"intituler\", \"type\", \"text\", \"placeholder\", \"Intitul\\u00E9:\", \"formControlName\", \"intituler\", \"required\", \"\"], [\"matInput\", \"\", \"id\", \"tauxTontine\", \"type\", \"number\", \"placeholder\", \"Montant\", \"formControlName\", \"tauxTontine\", \"required\", \"\"], [\"appearance\", \"outline\", 4, \"ngIf\"], [\"matInput\", \"\", \"id\", \"frequence\", \"type\", \"text\", \"placeholder\", \"Fr\\u00E9quence:\", \"formControlName\", \"frequence\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\"], [\"matInput\", \"\", \"id\", \"nbSeances\", \"type\", \"number\", \"placeholder\", \"nombre de seances\", \"formControlName\", \"nbSeances\", \"required\", \"\"], [\"matInput\", \"\", \"id\", \"tauxRetard\", \"type\", \"number\", \"placeholder\", \"Montant du retard\", \"formControlName\", \"tauxRetard\", \"required\", \"\"], [\"matInput\", \"\", \"id\", \"tauxEchec\", \"type\", \"number\", \"placeholder\", \"Echec Non b\\u00E9n\\u00E9ficier\", \"formControlName\", \"tauxEchec\", \"required\", \"\"], [\"matInput\", \"\", \"id\", \"tauxEchecB\", \"type\", \"number\", \"placeholder\", \"Echec d\\u00E9j\\u00E0 b\\u00E9n\\u00E9ficier\", \"formControlName\", \"tauxEchecB\", \"required\", \"\"], [\"matInput\", \"\", \"id\", \"Boisson\", \"type\", \"number\", \"placeholder\", \"Montant de la Boisson\", \"formControlName\", \"boisson\", \"required\", \"\"]],\n      template: function CreatTontineComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function CreatTontineComponent_Template_form_ngSubmit_2_listener() {\n            return ctx.creat();\n          });\n          i0.ɵɵelementStart(3, \"mat-form-field\", 3)(4, \"mat-select\", 4)(5, \"mat-option\", 5);\n          i0.ɵɵtext(6, \"Vente\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"mat-option\", 6);\n          i0.ɵɵtext(8, \"Simple\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(9, \"mat-form-field\", 3)(10, \"mat-label\");\n          i0.ɵɵtext(11, \"Intitul\\u00E9:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(12, \"input\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"mat-form-field\", 3)(14, \"mat-label\");\n          i0.ɵɵtext(15, \"Montant de cotisation:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(16, \"input\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(17, CreatTontineComponent_mat_form_field_17_Template, 4, 0, \"mat-form-field\", 9);\n          i0.ɵɵelementStart(18, \"mat-form-field\", 3)(19, \"mat-label\");\n          i0.ɵɵtext(20, \"Fr\\u00E9quence:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(22, CreatTontineComponent_mat_form_field_22_Template, 4, 0, \"mat-form-field\", 9);\n          i0.ɵɵtemplate(23, CreatTontineComponent_mat_form_field_23_Template, 4, 0, \"mat-form-field\", 9);\n          i0.ɵɵtemplate(24, CreatTontineComponent_mat_form_field_24_Template, 4, 0, \"mat-form-field\", 9);\n          i0.ɵɵtemplate(25, CreatTontineComponent_mat_form_field_25_Template, 4, 0, \"mat-form-field\", 9);\n          i0.ɵɵelementStart(26, \"button\", 11);\n          i0.ɵɵtext(27, \"Cr\\u00E9er\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.Form);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"ngIf\", ctx.Form.value.type == \"1\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.Form.value.type == \"2\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.Form.value.type == \"2\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.Form.value.type == \"2\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.Form.value.type == \"2\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", !ctx.Form.valid);\n        }\n      },\n      dependencies: [i4.NgIf, i5.MatButton, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i6.MatInput, i7.MatFormField, i7.MatLabel, i8.MatSelect, i9.MatOption, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.list[_ngcontent-%COMP%]{width:50%;background-color:#fff;margin:65px 0;border-radius:5px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px}@media screen and (max-width: 768px){.list[_ngcontent-%COMP%]{width:70%}}@media screen and (max-width: 425px){.list[_ngcontent-%COMP%]{width:95%}}\"]\n    });\n  }\n  return CreatTontineComponent;\n})();\nexport { CreatTontineComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}