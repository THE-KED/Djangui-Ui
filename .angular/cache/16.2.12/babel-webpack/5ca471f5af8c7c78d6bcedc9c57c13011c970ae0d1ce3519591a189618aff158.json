{"ast":null,"code":"import { getNbParticipation } from \"./getNbParticipation\";\nexport class GetTotalTontine {\n  constructor() {}\n  getTotalTontineVente(allCotisation, allPart, allRetard, allEchecNonPaye, allEchecPaye, tontine) {\n    let total = 0;\n    let totalTauxVentes = 0;\n    let totalEchecPaid = 0;\n    let totalRetrad = 0;\n    let totalComplement = 0;\n    let totalBoisson = 0;\n    let totalGratuit = 0;\n    let totalEchecNonPaid = 0;\n    let totalSupplement = 0;\n    let nbPart = 0;\n    let result = new Map();\n    for (let cot of allCotisation) {\n      nbPart = getNbParticipation(Number(cot.id), allPart);\n      totalTauxVentes += cot.tauxVente;\n      totalComplement += cot.complement;\n      totalBoisson += cot.tauxTontine;\n      if (cot.gratuit) totalGratuit += cot.tauxTontine * nbPart;\n      if (nbPart > tontine.nbSeances) totalSupplement += (nbPart - tontine.nbSeances) * cot.tauxTontine;\n      for (let retar of allRetard) {\n        if (retar[0] == cot.id) totalRetrad += retar[1] * cot.tauxEchec;\n      }\n      for (let echec of allEchecPaye) {\n        if (echec[0] == cot.id) totalEchecPaid += echec[1] * (cot.tauxEchec + cot.tauxTontine);\n      }\n      for (let echec of allEchecNonPaye) {\n        if (echec[0] == cot.id) totalEchecNonPaid += echec[1] * cot.tauxEchec;\n      }\n    }\n    total = totalTauxVentes + totalRetrad + totalEchecPaid + totalSupplement - (totalComplement + totalBoisson + totalGratuit);\n    result.set(\"total\", total);\n    result.set(\"ventes\", totalTauxVentes);\n    result.set(\"retard\", totalRetrad);\n    result.set(\"E.P\", totalEchecPaid);\n    result.set(\"E.N.P\", totalEchecNonPaid);\n    result.set(\"supl\", totalSupplement);\n    result.set(\"compl\", totalComplement);\n    result.set(\"gratuit\", totalGratuit);\n    result.set(\"boisson\", totalBoisson);\n    return result;\n  }\n  getTotalTontineSimple(allCotisation, allPart, allRetard, allEchecNonPaye, allEchecPaye, tontine) {\n    let total = 0;\n    let totalTaux = 0;\n    let totalEchecPaid = 0;\n    let totalRetrad = 0;\n    let totalComplement = 0;\n    let totalEchecNonPaid = 0;\n    let nbPart = 0;\n    let result = new Map();\n    for (let cot of allCotisation) {\n      nbPart = getNbParticipation(Number(cot.id), allPart);\n      totalTaux += tontine.tauxTontine;\n      totalComplement += cot.complement;\n      for (let retar of allRetard) {\n        if (retar[0] == cot.id) totalRetrad += retar[1] * tontine.tauxEchec;\n      }\n      for (let echec of allEchecPaye) {\n        if (echec[0] == cot.id) totalEchecPaid += (echec[1] - echec[2]) * (tontine.tauxEchec + tontine.tauxTontine) + echec[2] * (Number(tontine.tauxEchecB) + tontine.tauxTontine);\n      }\n      for (let echec of allEchecNonPaye) {\n        if (echec[0] == cot.id) totalEchecNonPaid += echec[1] * tontine.tauxEchec;\n      }\n    }\n    total = totalRetrad + totalEchecPaid - totalComplement;\n    result.set(\"total\", total);\n    result.set(\"taux\", totalTaux);\n    result.set(\"retard\", totalRetrad);\n    result.set(\"E.P\", totalEchecPaid);\n    result.set(\"E.N.P\", totalEchecNonPaid);\n    result.set(\"compl\", totalComplement);\n    return result;\n  }\n}","map":{"version":3,"names":["getNbParticipation","GetTotalTontine","constructor","getTotalTontineVente","allCotisation","allPart","allRetard","allEchecNonPaye","allEchecPaye","tontine","total","totalTauxVentes","totalEchecPaid","totalRetrad","totalComplement","totalBoisson","totalGratuit","totalEchecNonPaid","totalSupplement","nbPart","result","Map","cot","Number","id","tauxVente","complement","tauxTontine","gratuit","nbSeances","retar","tauxEchec","echec","set","getTotalTontineSimple","totalTaux","tauxEchecB"],"sources":["/home/ked/backups/Angular/DanguiUi/src/app/metier/getTotalTontine.ts"],"sourcesContent":["import {Cotisation} from \"../../Models/Entitys/Cotisation\";\nimport {getNbParticipation} from \"./getNbParticipation\";\nimport {TontinesOps} from \"../../Models/Abstracts/Interfaces/TontinesOps\";\nexport class GetTotalTontine{\n\n    constructor() {\n    }\n\n    public getTotalTontineVente(allCotisation:Cotisation[],\n                         allPart:number[][],\n                         allRetard:number[][],\n                         allEchecNonPaye:number[][],\n                         allEchecPaye:number[][],tontine:TontinesOps) {\n\n        let total=0;\n        let totalTauxVentes = 0;\n        let totalEchecPaid = 0;\n        let totalRetrad =0;\n        let totalComplement = 0;\n        let totalBoisson=0;\n        let totalGratuit=0;\n        let totalEchecNonPaid=0;\n        let totalSupplement=0;\n\n        let nbPart =0;\n\n        let result:Map<string,number> = new Map<string, number>();\n\n        for(let cot of allCotisation){\n\n\n            nbPart=getNbParticipation(Number(cot.id),allPart);\n\n            totalTauxVentes += cot.tauxVente;\n            totalComplement += cot.complement;\n            totalBoisson += cot.tauxTontine;\n            if(cot.gratuit)\n                totalGratuit += cot.tauxTontine*nbPart;\n            if(nbPart>tontine.nbSeances)\n                totalSupplement += (nbPart-tontine.nbSeances)*cot.tauxTontine;\n\n            for(let retar of allRetard ){\n                if(retar[0]==cot.id)\n                    totalRetrad += retar[1]*cot.tauxEchec;\n            }\n            for(let echec of allEchecPaye){\n                if(echec[0]==cot.id)\n                    totalEchecPaid += echec[1]*(cot.tauxEchec+cot.tauxTontine);\n            }\n            for(let echec of allEchecNonPaye ){\n                if(echec[0]==cot.id)\n                    totalEchecNonPaid += echec[1]*(cot.tauxEchec);\n            }\n\n        }\n\n        total=((totalTauxVentes + totalRetrad + totalEchecPaid + totalSupplement) - (totalComplement + totalBoisson + totalGratuit));\n\n        result.set(\"total\",total);\n        result.set(\"ventes\",totalTauxVentes);\n        result.set(\"retard\",totalRetrad);\n        result.set(\"E.P\",totalEchecPaid);\n        result.set(\"E.N.P\",totalEchecNonPaid);\n        result.set(\"supl\",totalSupplement);\n        result.set(\"compl\",totalComplement)\n        result.set(\"gratuit\",totalGratuit);\n        result.set(\"boisson\",totalBoisson);\n\n        return result;\n    }\n    public getTotalTontineSimple(allCotisation:Cotisation[],\n                                          allPart:number[][],\n                                          allRetard:number[][],\n                                          allEchecNonPaye:number[][],\n                                          allEchecPaye:number[][],tontine:TontinesOps) {\n\n\n\n        let total=0;\n        let totalTaux = 0;\n        let totalEchecPaid = 0;\n        let totalRetrad =0;\n        let totalComplement = 0;\n        let totalEchecNonPaid=0;\n\n        let nbPart =0;\n\n        let result:Map<string,number> = new Map<string, number>();\n\n        for(let cot of allCotisation){\n\n            nbPart=getNbParticipation(Number(cot.id),allPart);\n\n            totalTaux += tontine.tauxTontine;\n            totalComplement += cot.complement;\n\n            for(let retar of allRetard ){\n                if(retar[0]==cot.id)\n                    totalRetrad += retar[1]*tontine.tauxEchec;\n            }\n            for(let echec of allEchecPaye){\n                if(echec[0]==cot.id)\n                    totalEchecPaid += ((echec[1]-echec[2])*(tontine.tauxEchec+tontine.tauxTontine) + echec[2]*(Number(tontine.tauxEchecB)+tontine.tauxTontine));\n            }\n            for(let echec of allEchecNonPaye ){\n                if(echec[0]==cot.id)\n                    totalEchecNonPaid += echec[1]*(tontine.tauxEchec);\n            }\n\n        }\n\n        total=((totalRetrad + totalEchecPaid) - (totalComplement));\n\n        result.set(\"total\",total);\n        result.set(\"taux\",totalTaux);\n        result.set(\"retard\",totalRetrad);\n        result.set(\"E.P\",totalEchecPaid);\n        result.set(\"E.N.P\",totalEchecNonPaid);\n        result.set(\"compl\",totalComplement)\n\n        return result;\n\n    }\n\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}