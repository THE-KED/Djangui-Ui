{"ast":null,"code":"import { getNbParticipation } from \"./getNbParticipation\";\nexport class GetTotalTontine {\n  constructor() {}\n  getTotalTontineVente(allCotisation, allPart, allRetard, allEchecNonPaye, allEchecPaye, tontine) {\n    let total = 0;\n    let totalTauxVentes = 0;\n    let totalEchecPaid = 0;\n    let totalRetrad = 0;\n    let totalComplement = 0;\n    let totalBoisson = 0;\n    let totalGratuit = 0;\n    let totalEchecNonPaid = 0;\n    let totalSupplement = 0;\n    let nbPart = 0;\n    let result = new Map();\n    for (let cot of allCotisation) {\n      nbPart = getNbParticipation(Number(cot.id), allPart);\n      totalTauxVentes += cot.tauxVente;\n      totalComplement += cot.complement;\n      totalBoisson += cot.tauxTontine;\n      if (cot.gratuit) totalGratuit += cot.tauxTontine * nbPart;\n      if (nbPart > tontine.nbSeances) totalSupplement += (nbPart - tontine.nbSeances) * cot.tauxTontine;\n      for (let retar of allRetard) {\n        if (retar[0] == cot.id) totalRetrad += retar[1] * cot.tauxEchec;\n      }\n      for (let echec of allEchecPaye) {\n        if (echec[0] == cot.id) totalEchecPaid += echec[2] * cot.tauxEchec;\n      }\n      for (let echec of allEchecNonPaye) {\n        if (echec[0] == cot.id) totalEchecNonPaid += echec[1] * cot.tauxEchec;\n      }\n    }\n    total = totalTauxVentes + totalRetrad + totalEchecPaid + totalSupplement - (totalComplement + totalBoisson + totalGratuit);\n    result.set(\"total\", total);\n    result.set(\"ventes\", totalTauxVentes);\n    result.set(\"retard\", totalRetrad);\n    result.set(\"E.P\", totalEchecPaid);\n    result.set(\"E.N.P\", totalEchecNonPaid);\n    result.set(\"supl\", totalSupplement);\n    result.set(\"compl\", totalComplement);\n    result.set(\"gratuit\", totalGratuit);\n    result.set(\"boisson\", totalBoisson);\n    return result;\n  }\n  getTotalTontineSimple(allCotisation, allPart, allRetard, allEchecNonPaye, allEchecPaye, tontine) {\n    let total = 0;\n    let totalTaux = 0;\n    let totalEchecPaid = 0;\n    let totalRetrad = 0;\n    let totalComplement = 0;\n    let totalEchecNonPaid = 0;\n    let nbPart = 0;\n    let result = new Map();\n    console.log(\"cot\", allCotisation, \"ret\", allRetard, \"ep\", allEchecPaye, \"enp\", allEchecNonPaye);\n    for (let cot of allCotisation) {\n      nbPart = getNbParticipation(Number(cot.id), allPart);\n      totalTaux += tontine.tauxTontine;\n      totalComplement += cot.complement;\n      for (let retar of allRetard) {\n        if (retar[0] == cot.id) totalRetrad += retar[1] * tontine.tauxEchec;\n      }\n      for (let echec of allEchecPaye) {\n        if (echec[0] == cot.id) totalEchecPaid += echec[2] * tontine.tauxEchec;\n      }\n      for (let echec of allEchecNonPaye) {\n        if (echec[0] == cot.id) totalEchecNonPaid += echec[1] * tontine.tauxEchec;\n      }\n    }\n    total = totalRetrad + totalEchecPaid - totalComplement;\n    result.set(\"total\", total);\n    result.set(\"taux\", totalTaux);\n    result.set(\"retard\", totalRetrad);\n    result.set(\"E.P\", totalEchecPaid);\n    result.set(\"E.N.P\", totalEchecNonPaid);\n    result.set(\"compl\", totalComplement);\n    return result;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}