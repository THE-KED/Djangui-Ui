{"ast":null,"code":"import { DestroyRef, inject } from '@angular/core';\nimport { takeUntilDestroyed } from \"@angular/core/rxjs-interop\";\nimport { forkJoin, tap } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/tontine-service.service\";\nimport * as i2 from \"../../Services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"../../money.pipe\";\nfunction EtatComponent_th_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" No. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13)(1, \"span\", 14);\n    i0.ɵɵtext(2, \" No :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r12 = ctx.$implicit;\n    const i_r13 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r1.getClass(element_r12));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i_r13 + 1, \" \");\n  }\n}\nfunction EtatComponent_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" Tontine \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13)(1, \"span\", 14);\n    i0.ɵɵtext(2, \" Tontine :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r14 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r3.getClass(element_r14));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", element_r14.cotisation.nom, \" \");\n  }\n}\nfunction EtatComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" Seance \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13)(1, \"span\", 14);\n    i0.ɵɵtext(2, \" Seance :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r15 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r5.getClass(element_r15));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", element_r15.cotisation.rang, \" \");\n  }\n}\nfunction EtatComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" Participation \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_14_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵtext(1, \" Echec non payer \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_14_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Retard\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_14_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Echec payer le : \", element_r17.updatedAt, \"\");\n  }\n}\nfunction EtatComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13)(1, \"span\", 14);\n    i0.ɵɵtext(2, \" Participation :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, EtatComponent_td_14_span_3_Template, 2, 0, \"span\", 15);\n    i0.ɵɵtemplate(4, EtatComponent_td_14_span_4_Template, 2, 0, \"span\", 16);\n    i0.ɵɵtemplate(5, EtatComponent_td_14_span_5_Template, 2, 1, \"span\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r17 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r7.getClass(element_r17));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", element_r17.echec);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r17.retard);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !element_r17.tontine && !element_r17.echec);\n  }\n}\nfunction EtatComponent_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" Montant \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EtatComponent_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13)(1, \"span\", 14);\n    i0.ɵɵtext(2, \" Montant :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"money\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r23 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r9.getClass(element_r23));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 3, ctx_r9.checkMontant(element_r23)), \" \");\n  }\n}\nfunction EtatComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 18);\n  }\n}\nfunction EtatComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 19);\n  }\n}\nlet EtatComponent = /*#__PURE__*/(() => {\n  class EtatComponent {\n    constructor(tontineService, authService) {\n      this.tontineService = tontineService;\n      this.authService = authService;\n      this.displayedColumns = ['No', 'Tontine', 'Seance', \"Etat\", \"Montant\"];\n      this.dataSource = [];\n      this.echecs = [];\n      this.retards = [];\n      this.montants = [];\n      this.ben = [];\n      this.tontines = [];\n      this.tontid = [];\n      this.id = 0;\n      this.destroyRef = inject(DestroyRef);\n    }\n    ngOnInit() {\n      this.id = Number(this.authService.appUser?.membre.id);\n      console.log(\"id\", this.id);\n      let myEchecsCall = this.tontineService.getMyEchecs(this.id);\n      let myRetardsCall = this.tontineService.getMyRetards(this.id);\n      let benCall = this.tontineService.getben(this.id);\n      forkJoin([myEchecsCall, myRetardsCall, benCall]).pipe(takeUntilDestroyed(this.destroyRef), tap(data => {\n        //chargements de mes echecs\n        this.echecs = data[0];\n        for (let echec of data[0]) {\n          this.dataSource.push(echec);\n        }\n        //chargements de mes retards\n        this.retards = data[1];\n        for (let retard of data[1]) {\n          this.dataSource.push(retard);\n        }\n        //chargements des beneficiers\n        this.ben = data[2];\n        for (let benef of data[2]) {\n          if (benef.enregistrement?.tontine) {\n            this.tontines.push(benef.enregistrement.tontine);\n            this.tontid.push(benef.enregistrement.tontine.id);\n          }\n        }\n      })).subscribe(data => {\n        console.log(\"Echecs\", data[0]);\n        console.log(\"Retard\", data[1]);\n        console.log(\"ben\", data[2]);\n      });\n    }\n    checkMontant(part) {\n      let ton = part.enregistrement.tontine;\n      if (ton) return ton.tauxTontine + part.cotisation.tauxEchec;\n      return 0;\n    }\n    getClass(part) {\n      if (part.echec) return \"echec\";\n      if (part.retard) return \"retard\";\n      return \"echecP\";\n    }\n    static #_ = this.ɵfac = function EtatComponent_Factory(t) {\n      return new (t || EtatComponent)(i0.ɵɵdirectiveInject(i1.TontineServiceService), i0.ɵɵdirectiveInject(i2.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EtatComponent,\n      selectors: [[\"app-etat\"]],\n      decls: 20,\n      vars: 3,\n      consts: [[1, \"content\"], [1, \"tab\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"No\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"class\", 4, \"matCellDef\"], [\"matColumnDef\", \"Tontine\"], [\"matColumnDef\", \"Seance\"], [\"matColumnDef\", \"Etat\"], [\"matColumnDef\", \"Montant\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [1, \"mobile-label\"], [\"class\", \"lab\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"lab\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n      template: function EtatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"table\", 2);\n          i0.ɵɵelementContainerStart(3, 3);\n          i0.ɵɵtemplate(4, EtatComponent_th_4_Template, 2, 0, \"th\", 4);\n          i0.ɵɵtemplate(5, EtatComponent_td_5_Template, 4, 3, \"td\", 5);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(6, 6);\n          i0.ɵɵtemplate(7, EtatComponent_th_7_Template, 2, 0, \"th\", 4);\n          i0.ɵɵtemplate(8, EtatComponent_td_8_Template, 4, 3, \"td\", 5);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(9, 7);\n          i0.ɵɵtemplate(10, EtatComponent_th_10_Template, 2, 0, \"th\", 4);\n          i0.ɵɵtemplate(11, EtatComponent_td_11_Template, 4, 3, \"td\", 5);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(12, 8);\n          i0.ɵɵtemplate(13, EtatComponent_th_13_Template, 2, 0, \"th\", 4);\n          i0.ɵɵtemplate(14, EtatComponent_td_14_Template, 6, 5, \"td\", 5);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(15, 9);\n          i0.ɵɵtemplate(16, EtatComponent_th_16_Template, 2, 0, \"th\", 4);\n          i0.ɵɵtemplate(17, EtatComponent_td_17_Template, 5, 5, \"td\", 5);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵtemplate(18, EtatComponent_tr_18_Template, 1, 0, \"tr\", 10);\n          i0.ɵɵtemplate(19, EtatComponent_tr_19_Template, 1, 0, \"tr\", 11);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"dataSource\", ctx.dataSource.slice());\n          i0.ɵɵadvance(16);\n          i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        }\n      },\n      dependencies: [i3.NgIf, i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, i5.MoneyPipe],\n      styles: [\".content[_ngcontent-%COMP%]{width:99vw;height:auto;display:flex;align-items:center;justify-content:center;flex-direction:column}.tab[_ngcontent-%COMP%]{width:70%;margin:45px 0 75px;background-color:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#efefef;border:1px solid rgba(255,255,255,.7);border-radius:1%;box-shadow:0 25px 35px #262626cc}table[_ngcontent-%COMP%]{position:relative;background-color:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#efefef;border:1px solid rgba(255,255,255,.7);border-radius:1%;box-shadow:0 25px 35px #262626cc;background:transparent}.echec[_ngcontent-%COMP%]{background:rgba(255,18,2,.3);width:100%}.echecP[_ngcontent-%COMP%]{background:rgba(255,255,0,.3);width:100%}.lab[_ngcontent-%COMP%]{color:#3f51b5}.mat-column-No[_ngcontent-%COMP%]{width:32px;padding-right:24px;text-align:center}.mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width: 600px){.tab[_ngcontent-%COMP%]{width:95%}.mobile-label[_ngcontent-%COMP%]{width:80px!important;display:inline-block;font-weight:700!important;margin-right:2em}.mat-mdc-header-row[_ngcontent-%COMP%]{display:none}.mat-mdc-row[_ngcontent-%COMP%]{width:100%;display:flex!important;flex-direction:column!important;align-items:flex-start;padding:8px 24px;height:auto;border-bottom:1px solid #464646}.mdc-data-table__cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:.7em;border:none;width:100%}}\"]\n    });\n  }\n  return EtatComponent;\n})();\nexport { EtatComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}