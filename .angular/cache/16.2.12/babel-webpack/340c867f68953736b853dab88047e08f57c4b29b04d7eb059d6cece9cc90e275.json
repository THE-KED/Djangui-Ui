{"ast":null,"code":"import { getNbParticipation } from \"./getNbParticipation\";\nexport class GetTotalTontine {\n  constructor() {}\n  getTotalTontineVente(allCotisation, allPart, allRetard, allEchecNonPaye, allEchecPaye, tontine) {\n    let total = 0;\n    let totalTauxVentes = 0;\n    let totalEchecPaid = 0;\n    let totalRetrad = 0;\n    let totalComplement = 0;\n    let totalBoisson = 0;\n    let totalGratuit = 0;\n    let totalEchecNonPaid = 0;\n    let totalSupplement = 0;\n    let nbPart = 0;\n    let result = new Map();\n    console.log(\"allPart\", allPart, \"allRetard\", allRetard, \"allEchecNonPaye\", allEchecNonPaye, \"allEchecPaye\", allEchecPaye);\n    for (let cot of allCotisation) {\n      nbPart = getNbParticipation(Number(cot.id), allPart);\n      totalTauxVentes += cot.tauxVente;\n      totalComplement += cot.complement;\n      totalBoisson += cot.tauxTontine;\n      // totalSupplement += cot.supplement;\n      if (cot.gratuit) totalGratuit += cot.tauxTontine * nbPart;\n      if (nbPart > tontine.nbSeances) totalSupplement += (nbPart - tontine.nbSeances) * cot.tauxTontine;\n      for (let retar of allRetard) {\n        if (retar[0] == cot.id) totalRetrad += retar[1] * cot.tauxEchec;\n      }\n      for (let echec of allEchecPaye) {\n        if (echec[0] == cot.id) totalEchecPaid += echec[2] * (cot.tauxEchec >= 500 ? cot.tauxEchec : 500) + tontine.tauxTontine;\n      }\n      for (let echec of allEchecNonPaye) {\n        if (echec[0] == cot.id) totalEchecNonPaid += echec[1] * (cot.tauxEchec >= 500 ? cot.tauxEchec : 500) + tontine.tauxTontine;\n      }\n    }\n    total = totalTauxVentes + totalRetrad + totalEchecPaid + totalSupplement - (totalComplement + totalBoisson + totalGratuit);\n    result.set(\"total\", total);\n    result.set(\"ventes\", totalTauxVentes);\n    result.set(\"retard\", totalRetrad);\n    result.set(\"E.P\", totalEchecPaid);\n    result.set(\"E.N.P\", totalEchecNonPaid);\n    result.set(\"supl\", totalSupplement);\n    result.set(\"compl\", totalComplement);\n    result.set(\"gratuit\", totalGratuit);\n    result.set(\"boisson\", totalBoisson);\n    return result;\n  }\n  getTotalTontineSimple(allCotisation, allPart, allRetard, allEchecNonPaye, allEchecPaye, tontine) {\n    let total = 0;\n    let totalTaux = 0;\n    let totalEchecPaid = 0;\n    let totalRetrad = 0;\n    let totalComplement = 0;\n    let totalEchecNonPaid = 0;\n    let nbPart = 0;\n    let result = new Map();\n    console.log(\"cot\", allCotisation, \"ret\", allRetard, \"ep\", allEchecPaye, \"enp\", allEchecNonPaye);\n    for (let cot of allCotisation) {\n      nbPart = getNbParticipation(Number(cot.id), allPart);\n      totalTaux += tontine.tauxTontine;\n      totalComplement += cot.complement;\n      for (let retar of allRetard) {\n        if (retar[0] == cot.id) totalRetrad += retar[1] * tontine.tauxEchec;\n      }\n      for (let echec of allEchecPaye) {\n        if (echec[0] == cot.id) totalEchecPaid += echec[2] * tontine.tauxEchec;\n      }\n      for (let echec of allEchecNonPaye) {\n        if (echec[0] == cot.id) totalEchecNonPaid += echec[1] * tontine.tauxEchec;\n      }\n    }\n    total = totalRetrad + totalEchecPaid - totalComplement;\n    result.set(\"total\", total);\n    result.set(\"taux\", totalTaux);\n    result.set(\"retard\", totalRetrad);\n    result.set(\"E.P\", totalEchecPaid);\n    result.set(\"E.N.P\", totalEchecNonPaid);\n    result.set(\"compl\", totalComplement);\n    return result;\n  }\n}","map":{"version":3,"names":["getNbParticipation","GetTotalTontine","constructor","getTotalTontineVente","allCotisation","allPart","allRetard","allEchecNonPaye","allEchecPaye","tontine","total","totalTauxVentes","totalEchecPaid","totalRetrad","totalComplement","totalBoisson","totalGratuit","totalEchecNonPaid","totalSupplement","nbPart","result","Map","console","log","cot","Number","id","tauxVente","complement","tauxTontine","gratuit","nbSeances","retar","tauxEchec","echec","set","getTotalTontineSimple","totalTaux"],"sources":["/home/ked/backups/Angular/DanguiUi/src/app/metier/getTotalTontine.ts"],"sourcesContent":["import {Cotisation} from \"../../Models/Entitys/Cotisation\";\nimport {getNbParticipation} from \"./getNbParticipation\";\nimport {TontinesOps} from \"../../Models/Abstracts/Interfaces/TontinesOps\";\nexport class GetTotalTontine{\n\n    constructor() {\n    }\n\n    public getTotalTontineVente(allCotisation:Cotisation[],\n                         allPart:number[][],\n                         allRetard:number[][],\n                         allEchecNonPaye:number[][],\n                         allEchecPaye:number[][],tontine:TontinesOps) {\n\n        let total=0;\n        let totalTauxVentes = 0;\n        let totalEchecPaid = 0;\n        let totalRetrad =0;\n        let totalComplement = 0;\n        let totalBoisson=0;\n        let totalGratuit=0;\n        let totalEchecNonPaid=0;\n        let totalSupplement=0;\n\n        let nbPart =0;\n\n        let result:Map<string,number> = new Map<string, number>();\n\n        console.log(\"allPart\",allPart,\n            \"allRetard\",allRetard,\n            \"allEchecNonPaye\",allEchecNonPaye,\n            \"allEchecPaye\",allEchecPaye);\n\n        for(let cot of allCotisation){\n\n\n            nbPart=getNbParticipation(Number(cot.id),allPart);\n\n            totalTauxVentes += cot.tauxVente;\n            totalComplement += cot.complement;\n            totalBoisson += cot.tauxTontine;\n            // totalSupplement += cot.supplement;\n            if(cot.gratuit)\n                totalGratuit += cot.tauxTontine*nbPart;\n            if(nbPart>tontine.nbSeances)\n                totalSupplement += (nbPart-tontine.nbSeances)*cot.tauxTontine;\n\n            for(let retar of allRetard ){\n                if(retar[0]==cot.id)\n                    totalRetrad += retar[1]*cot.tauxEchec;\n            }\n            for(let echec of allEchecPaye){\n                if(echec[0]==cot.id)\n                    totalEchecPaid += echec[2]*(cot.tauxEchec>=500?cot.tauxEchec:500)+(tontine.tauxTontine);\n            }\n            for(let echec of allEchecNonPaye ){\n                if(echec[0]==cot.id)\n                    totalEchecNonPaid += echec[1]*(cot.tauxEchec>=500?cot.tauxEchec:500)+tontine.tauxTontine;\n            }\n\n        }\n\n        total=((totalTauxVentes + totalRetrad + totalEchecPaid + totalSupplement) - (totalComplement + totalBoisson + totalGratuit));\n\n        result.set(\"total\",total);\n        result.set(\"ventes\",totalTauxVentes);\n        result.set(\"retard\",totalRetrad);\n        result.set(\"E.P\",totalEchecPaid);\n        result.set(\"E.N.P\",totalEchecNonPaid);\n        result.set(\"supl\",totalSupplement);\n        result.set(\"compl\",totalComplement)\n        result.set(\"gratuit\",totalGratuit);\n        result.set(\"boisson\",totalBoisson);\n\n        return result;\n    }\n    public getTotalTontineSimple(allCotisation:Cotisation[],\n                                          allPart:number[][],\n                                          allRetard:number[][],\n                                          allEchecNonPaye:number[][],\n                                          allEchecPaye:number[][],tontine:TontinesOps) {\n\n\n\n        let total=0;\n        let totalTaux = 0;\n        let totalEchecPaid = 0;\n        let totalRetrad =0;\n        let totalComplement = 0;\n        let totalEchecNonPaid=0;\n\n        let nbPart =0;\n\n        let result:Map<string,number> = new Map<string, number>();\n\n        console.log(\"cot\",allCotisation,\"ret\",allRetard,\"ep\",allEchecPaye,\"enp\",allEchecNonPaye);\n\n        for(let cot of allCotisation){\n\n            nbPart=getNbParticipation(Number(cot.id),allPart);\n\n            totalTaux += tontine.tauxTontine;\n            totalComplement += cot.complement;\n\n            for(let retar of allRetard ){\n                if(retar[0]==cot.id)\n                    totalRetrad += retar[1]*tontine.tauxEchec;\n            }\n            for(let echec of allEchecPaye){\n                if(echec[0]==cot.id)\n                    totalEchecPaid += (echec[2]*(tontine.tauxEchec));\n            }\n            for(let echec of allEchecNonPaye ){\n                if(echec[0]==cot.id)\n                    totalEchecNonPaid += echec[1]*(tontine.tauxEchec);\n            }\n\n        }\n\n        total=((totalRetrad + totalEchecPaid) - (totalComplement));\n\n        result.set(\"total\",total);\n        result.set(\"taux\",totalTaux);\n        result.set(\"retard\",totalRetrad);\n        result.set(\"E.P\",totalEchecPaid);\n        result.set(\"E.N.P\",totalEchecNonPaid);\n        result.set(\"compl\",totalComplement)\n\n        return result;\n\n    }\n\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}