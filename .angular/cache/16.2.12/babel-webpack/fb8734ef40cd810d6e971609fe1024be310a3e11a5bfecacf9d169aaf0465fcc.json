{"ast":null,"code":"import { DestroyRef, inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from \"@angular/material/dialog\";\nimport { takeUntilDestroyed } from \"@angular/core/rxjs-interop\";\nimport { switchMap, tap } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"../../Services/tontine-service.service\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"../../../Models/Entitys/Participation\";\nclass CotisationDBComponent {\n  constructor(dialogRef, participation, tontineService, cd) {\n    this.dialogRef = dialogRef;\n    this.participation = participation;\n    this.tontineService = tontineService;\n    this.cd = cd;\n    this.destroyRef = inject(DestroyRef);\n  }\n  cotiser() {\n    if (this.participation.cotisation.statut == 0) {\n      this.participation.echec = false;\n      this.participation.tontine = true;\n    } else if (this.participation.cotisation.statut == 1) {\n      this.participation.echec = false;\n      this.participation.tontine = true;\n      this.participation.retard = true;\n    }\n    if (this.participation.cotisation.id == null) {\n      this.tontineService.saveCotisation(this.participation.cotisation).pipe(takeUntilDestroyed(this.destroyRef), switchMap(data => {\n        console.log(\"saveCotisation:\", data);\n        this.participation.cotisation = data;\n        return this.tontineService.saveParticipation(this.participation);\n      })).subscribe(data => {\n        console.log(\"save part\", data);\n        this.cd.markForCheck();\n        this.dialogRef.close({\n          data: this.participation\n        });\n      });\n    } else {\n      this.tontineService.saveParticipation(this.participation).pipe(takeUntilDestroyed(this.destroyRef), tap(data => {\n        console.log(\"save part\", data);\n        this.dialogRef.close({\n          data: this.participation\n        });\n      })).subscribe(data => {\n        this.cd.markForCheck();\n      });\n    }\n  }\n  static #_ = this.ɵfac = function CotisationDBComponent_Factory(t) {\n    return new (t || CotisationDBComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.TontineServiceService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CotisationDBComponent,\n    selectors: [[\"app-cotisation-db\"]],\n    decls: 11,\n    vars: 2,\n    consts: [[\"mat-dialog-content\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-flat-button\", \"\", \"cdkFocusInitial\", \"\", \"mat-button\", \"\", \"color\", \"primary\", 1, \"Btn\", 3, \"click\"], [\"mat-button\", \"\", \"mat-dialog-close\", \"\", \"color\", \"accent\", 1, \"Btn\"]],\n    template: function CotisationDBComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementStart(2, \"p\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5, \" NB: le retard sera pris en compte. \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 1)(7, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function CotisationDBComponent_Template_button_click_7_listener() {\n          return ctx.cotiser();\n        });\n        i0.ɵɵtext(8, \"OUI\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 3);\n        i0.ɵɵtext(10, \"NON\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" Confirmer la cotisation de \", ctx.participation.enregistrement.tontine == null ? null : ctx.participation.enregistrement.tontine.tauxTontine, \" Chez Mr \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.participation.enregistrement.membre.nom, \" \");\n      }\n    },\n    dependencies: [i3.MatButton, i1.MatDialogClose, i1.MatDialogContent, i1.MatDialogActions],\n    styles: [\".mat-mdc-dialog-actions[_ngcontent-%COMP%] {\\n  margin: 0;\\n  justify-content: flex-start;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  width: 100%;\\n}\\n\\n.Btn[_ngcontent-%COMP%] {\\n  margin: 0 !important;\\n  width: 95%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGlhbG9nYm94L2NvdGlzYXRpb24tZGIvY290aXNhdGlvbi1kYi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFNBQUE7RUFDQSwyQkFBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQUNGOztBQUNBO0VBQ0Usb0JBQUE7RUFDQSxVQUFBO0FBRUYiLCJzb3VyY2VzQ29udGVudCI6WyIubWF0LW1kYy1kaWFsb2ctYWN0aW9ucyB7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG4uQnRue1xyXG4gIG1hcmdpbjogMCAhaW1wb3J0YW50O1xyXG4gIHdpZHRoOiA5NSU7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"],\n    changeDetection: 0\n  });\n}\nexport { CotisationDBComponent };","map":{"version":3,"names":["DestroyRef","inject","MAT_DIALOG_DATA","takeUntilDestroyed","switchMap","tap","CotisationDBComponent","constructor","dialogRef","participation","tontineService","cd","destroyRef","cotiser","cotisation","statut","echec","tontine","retard","id","saveCotisation","pipe","data","console","log","saveParticipation","subscribe","markForCheck","close","_","i0","ɵɵdirectiveInject","i1","MatDialogRef","i2","TontineServiceService","ChangeDetectorRef","_2","selectors","decls","vars","consts","template","CotisationDBComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","CotisationDBComponent_Template_button_click_7_listener","ɵɵadvance","ɵɵtextInterpolate1","enregistrement","tauxTontine","membre","nom"],"sources":["/home/ked/backups/Angular/DanguiUi/src/app/dialogbox/cotisation-db/cotisation-db.component.ts","/home/ked/backups/Angular/DanguiUi/src/app/dialogbox/cotisation-db/cotisation-db.component.html"],"sourcesContent":["import {ChangeDetectionStrategy, ChangeDetectorRef, Component, DestroyRef, inject, Inject} from '@angular/core';\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\nimport {Participation} from \"../../../Models/Entitys/Participation\";\nimport {TontineServiceService} from \"../../Services/tontine-service.service\";\nimport {takeUntilDestroyed} from \"@angular/core/rxjs-interop\";\nimport {switchMap, tap} from \"rxjs\";\n\n@Component({\n  selector: 'app-cotisation-db',\n  templateUrl: './cotisation-db.component.html',\n  styleUrls: ['./cotisation-db.component.scss'],\n    changeDetection:ChangeDetectionStrategy.OnPush\n})\nexport class CotisationDBComponent {\n\n\n  destroyRef = inject(DestroyRef);\n\n  constructor(public dialogRef:MatDialogRef<CotisationDBComponent>,\n              @Inject(MAT_DIALOG_DATA) public participation:Participation,\n              private tontineService:TontineServiceService,\n              private cd:ChangeDetectorRef) {\n\n  }\n\n  cotiser(){\n    if(this.participation.cotisation.statut==0){\n      this.participation.echec=false;\n      this.participation.tontine=true;\n    }else if(this.participation.cotisation.statut==1){\n      this.participation.echec=false;\n      this.participation.tontine=true;\n      this.participation.retard=true;\n    }\n    if(this.participation.cotisation.id==null){\n      this.tontineService.saveCotisation(this.participation.cotisation).pipe(\n          takeUntilDestroyed(this.destroyRef),\n          switchMap(data =>{\n              console.log(\"saveCotisation:\",data);\n              this.participation.cotisation=data;\n\n              return this.tontineService.saveParticipation(this.participation);\n          })\n      ).subscribe(\n        data =>{\n          console.log(\"save part\",data);\n          this.cd.markForCheck();\n          this.dialogRef.close({ data: this.participation });\n        }\n      );\n\n    }else {\n      this.tontineService.saveParticipation(this.participation).pipe(\n          takeUntilDestroyed(this.destroyRef),\n          tap(data =>{\n              console.log(\"save part\",data);\n              this.dialogRef.close({ data: this.participation });\n          })\n\n      ).subscribe(\n        data=>{\n            this.cd.markForCheck();\n        }\n      );\n    }\n  }\n}\n","\n<div mat-dialog-content>\n  Confirmer la cotisation de {{participation.enregistrement.tontine?.tauxTontine}} Chez Mr\n  <p>\n    {{participation.enregistrement.membre.nom}}\n  </p>\n  <p>\n    NB: le retard sera pris en compte.\n  </p>\n</div>\n<div mat-dialog-actions>\n  <button mat-flat-button cdkFocusInitial  mat-button  class=\"Btn\" color=\"primary\" (click)=\"cotiser()\">OUI</button>\n  <button mat-button mat-dialog-close color=\"accent\" class=\"Btn\">NON</button>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}